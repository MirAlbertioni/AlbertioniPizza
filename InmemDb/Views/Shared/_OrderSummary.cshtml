@model ICollection<InmemDb.Models.DishCart>
@inject InmemDb.Services.IngredientService ingredientService

<table class="table">
    @foreach (var dish in Model)
    {
        <tr>
            <td>@dish.Dish.Name</td>
<td>@ingredientService.AllToStringForDishId(dish.DishId)</td>
            
            <td>@dish.Quantity</td>
            <td>@(dish.Quantity * dish.Dish.Price) KR</td>
        </tr>

    }
</table>
<table class="table">
    <tr>
        <td><b>To Pay @Model.Sum(p => p.Dish.Price * p.Quantity) KR</b></td>
    </tr>
    <tr>
        <td><a class="btn btn-primary" asp-action="ResetCart" asp-controller="ShoppingCart">Reset</a></td>
        @*@if (User.IsInRole("User"))
        {
            <td><a class="btn btn-primary" asp-action="Payment" asp-controller="Order">Buy</a></td>
        }
        else
        {*@
            <td><a class="btn btn-primary" asp-action="LoginCreateOrGuest" asp-controller="ShoppingCart">Checkout</a></td>
        @*}*@
    </tr>
</table>